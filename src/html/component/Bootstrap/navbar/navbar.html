
<dom-module id="bs-navbar">
  <template>
    <style>
      /* Navbar */

      :host {
        display: inline-block;
        vertical-align: middle;

        &.navbar-left {
          float: none !important;
        }

        .nav.navbar-nav {
          padding: 0;
        }
        .navbar-ex1-collapse {
          /*padding: 20px 0;*/
        }
        .portal-nav-level-two {
          padding: 10px 0;
        }
        .scania-symbol-small {
          margin: 0;
        }
        #maximize-button {
          margin: 0;
        }
        .nav a:hover,
        .nav a:active {
          text-decoration: none;
        }
      }
    </style>

    <nav class="nav navbar-nav">
      <content></content>
    </nav>
  </template>

  <script>
    Polymer({
      is: 'bs-navbar',
      properties: {
        variation: 0,
        fullbleed: {
          type: Boolean,
          value: true
        }
      }
    });
  </script>
</dom-module>

<dom-module id="bs-nav">
  <template>
    <style>
      /* Bs nav */

      :host {
        display: block;

        ::content {

          a:hover,
          a:active,
          a:focus {
            text-decoration: none;
          }
        }
        .nav-pills {
          margin-bottom: 15px;

          ::content nav-item {

            &:first-child a {
              padding-left: 0;
            }
            &.active a span {
              border-bottom: 3px solid #C30413;
              padding-bottom: 3px;
              font-family: Scania Sans Bold;
            }

            a {
              text-transform: uppercase;
            }
          }
        }
        .nav-tabs ::content nav-item {

          &.active a {
            background-color: #333;
            color: #fff;
            font-family: Scania Sans Bold;
          }

          a {
            min-width: 150px;
            text-transform: uppercase;
          }
        }
      }
    </style>

    <nav class$="nav nav-{{type}}">
      <content></content>
    </nav>
  </template>

  <script>
    Polymer({
      is: 'bs-nav',
      properties: {
        type: {
          type: String,
          value: 'item'
        },
        fullbleed: {
          type: Boolean,
          value: true
        }
      }
    });
  </script>
</dom-module>

<dom-module id="bs-tabs">
  <template>
    <style>
      /* Tab content */

      :host {
        display: block;
      }
    </style>

    <content></content>
  </template>

  <script>
    Polymer({
      is: 'bs-tabs',
      properties: {
        fullblead: {
          type: Boolean,
          value: false
        }
      },
      created: function() {
        var list = document.createElement('bs-nav'),
            type = this.getAttribute('type') || 'tabs',
            pos = this.getAttribute('nav-pos') || 'above';

        for(var i=0;i<this.children.length;i++) {
          var item = document.createElement('nav-item'),
              randomStr = Math.random().toString(36).substr(2, 7),
              id = randomStr + '-' + (i+1);

          Polymer.dom(item).textContent = this.children[i].getAttribute('name');
          Polymer.dom(item).setAttribute('location', '#' + id);
          Polymer.dom(item).setAttribute('tab', '');

          /*if(Polymer.dom(item.children[0]).setAttribute) {
            Polymer.dom(item.children[0]).setAttribute('target', '_self');
          }*/

          list.children[0].appendChild(item);

          this.children[i].setAttribute('id', id);
          this.children[i].classList.add('tab-pane','fade');

          if(i===0) {
            item.classList.add('active');
            this.children[i].classList.add('active', 'in');
          }
        }

        Polymer.dom(list).setAttribute('type', type);

        if(pos === 'above') {
          Polymer.dom(this).insertBefore(list, this.children[0]);
        } else {
          Polymer.dom(this).appendChild(list);
        }
      },
      ready: function() {
        this.classList.add('tab-content');

        //if(!this.fullblead) {
        /*if(this.getAttribute('fullbleed') === null || this.getAttribute('fullbleed') === 'false') {
          //this.parentNode.innerHTML = '<div class="container">' + this.parentNode.innerHTML + '</div>';
          $(this).wrap('<div class="container" />');
        }*/

        // Unfortunatly bootstrap standard activation of current item does not work
        // with our custom elements. Thats why this is needed...
        $(document).ready(function() {
          $('a[data-toggle="tab"]').on('shown.bs.tab', function(event) {
            $(event.target).parent().siblings().removeClass('active');
            $(event.target).parent().addClass('active');
          })
        })
      }
    });
  </script>
</dom-module>

<dom-module id="nav-item">
  <template>
    <style>
      /* Nav item */

      :host {
        display: inline-block;
        padding: 0 15px;

        a {
          position: relative;
          display: block;
        }
      }
      :host-context(.nav-pills):first-child {
        padding-left: 0;
      }
      :host-context(.nav-tabs) {
        border: 0;
        display: inline-block;
        border-right: 1px solid #e2e2e2;

        &:first-child {
          border-left: 1px solid #e2e2e2;
        }
      }
    </style>

    <template is="dom-if" if="{{!tab}}">
      <!-- <a href="{{location}}"><span><content></content></span></a> -->
    </template>

    <template is="dom-if" if="{{tab}}">
      <!-- <a href="{{location}}" data-toggle="tab"><span><content></content></span></a> -->
    </template>

    <content select="c-sub-navigation">
      <!--
      TODO - We do not really want component specific stuff like this here, solve in a better way... 
      Might be possible to have it in primary-items, same thing goes for isSubNav
      -->
    </content>

    <template is="dom-if" if="{{isSubNav}}">
      <a href class="sub-nav-item"><span class="icon-arrow-left"></span></a>
    </template>

    <a href="{{location}}">
      <span class$="{{setClasses(icon)}}"><content></content></span>
    </a>
    
  </template>

  <script>
    Polymer({
      is: 'nav-item',
      properties: {
        tab: {
          type: Boolean,
          value: false
        },
        dataToggle: '',
        variation: 0,
        fullbleed: {
          type: Boolean,
          value: true
        },
        isSubNav: {
          type: Boolean,
          value: false
        },
        icon: String
      },
      attached: function() {
        if( this.dataToggle ) {
          this.querySelector('a').setAttribute('data-toggle', this.dataToggle);
          this.querySelector('a').setAttribute('target', '_self');
          this.removeAttribute('data-toggle');
        }

        if( this.querySelectorAll('c-sub-navigation').length ) {
          this.isSubNav = true;
        }
      },
      setClasses: function(icon) {
        return icon ? 'icon-' + icon : '';
      }
    });
  </script>
</dom-module>

<link rel="import" href="variation-1.html">
